<h1 id="adjust-testnet-block-minimum-difficulty">Adjust Testnet block minimum difficulty</h1>

<table>
  <thead>
    <tr>
      <th style="text-align: left">RSKIP</th>
      <th style="text-align: left">290</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Title</strong></td>
      <td style="text-align: left">Adjust Testnet block minimum difficulty</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Created</strong></td>
      <td style="text-align: left">18-Nov-2021</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Author</strong></td>
      <td style="text-align: left">AE</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Purpose</strong></td>
      <td style="text-align: left">Usa</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Layer</strong></td>
      <td style="text-align: left">Core</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Complexity</strong></td>
      <td style="text-align: left">2</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Status</strong></td>
      <td style="text-align: left">Draft</td>
    </tr>
  </tbody>
</table>

<h1 id="abstract"><strong>Abstract</strong></h1>

<p>This RSKIP proposes to increase the block minimum difficulty for RSK Testnet. It only impacts Testnet consensus rules, and has no impact in RSK Mainnet.</p>

<h1 id="motivation"><strong>Motivation</strong></h1>

<p>According to RSK Testnet consensus rules, the networkâ€™s minimum block difficulty will be decreased to a defined value (131,072) if no new blocks are mined for a period of 10 or more minutes. This is a safeguard against unusual increases in hashing power that, in general, drop off the network after some time (for example, this happens when a mining pool is doing tests on RSK Testnet but later switch that hashing power to RSK Mainnet), leaving the network with a block difficulty that can be high for software miners to find new blocks.</p>

<p>The goal of this improvement is to increase the predefined value to 550,000,000. The problem with the current value of 131,072 is that is too low, and even with regular software miners the amount of blocks produced is high until difficulty stabilizes, unnecessarily increasing the workload on the nodes of the network.</p>

<h1 id="specification"><strong>Specification</strong></h1>

<p>Minimum difficulty for Testnet is defined when Constants class is instantiated as shown in below snippet, extracted from rskj-core/src/main/java/org/ethereum/config/Constants.java file:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">Constants</span> <span class="nf">testnet</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Constants</span><span class="o">(</span>
                <span class="no">TESTNET_CHAIN_ID</span><span class="o">,</span>
                <span class="kc">false</span><span class="o">,</span>
                <span class="mi">14</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">BlockDifficulty</span><span class="o">(</span><span class="nc">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">131072</span><span class="o">)),</span>
                <span class="k">new</span> <span class="nf">BlockDifficulty</span><span class="o">(</span><span class="nc">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">((</span><span class="kt">long</span><span class="o">)</span> <span class="mi">14</span><span class="no">E15</span><span class="o">)),</span>
                <span class="nc">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">50</span><span class="o">),</span>
                <span class="mi">540</span><span class="o">,</span>
                <span class="nc">BridgeTestNetConstants</span><span class="o">.</span><span class="na">getInstance</span><span class="o">()</span>
        <span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>The 4th parameter needs to be set to the new value depending on the block number defined for hard fork activation (not yet defined).</p>

<h1 id="copyright"><strong>Copyright</strong></h1>

<p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.</p>
