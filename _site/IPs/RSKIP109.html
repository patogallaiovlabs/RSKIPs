<h1 id="lower-storage-gas-costs-for-shorter-keys">Lower Storage Gas Costs for Shorter Keys</h1>

<table>
  <thead>
    <tr>
      <th style="text-align: left">RSKIP</th>
      <th style="text-align: left">109</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Title</strong></td>
      <td style="text-align: left">Lower Storage Gas Costs for Shorter Keys</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Created</strong></td>
      <td style="text-align: left">2019</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Author</strong></td>
      <td style="text-align: left">SDL</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Layer</strong></td>
      <td style="text-align: left">Sca, Usa</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Complexity</strong></td>
      <td style="text-align: left">2</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Status</strong></td>
      <td style="text-align: left">Draft</td>
    </tr>
  </tbody>
</table>

<h1 id="abstract">Abstract</h1>

<p>The RSKIP108 specifies a new method to compress storage cell keys for the Unitrie. A new gas cost scheme is required to incentivize users to use shorter keys, and therefore reduce full node requirements.</p>

<h2 id="specification">Specification</h2>

<p>The new gas cost for creating a new storage cell is changed from 20k to:</p>

<p>​	newCellCost = 5000 + size_cost
​	size_cost = 230*(keyBytes+dataBytes)</p>

<p>This is the SET cost (zero to non-zero). As 0x00 is trimmed to 0x00, the minimum value for keyBytes is 1, and the minimum value for dataBytes is 1.</p>

<p>The maximum SET cost is: 19720</p>

<p>The minimum SET cost is: 5460</p>

<p>When a cell value is changed, the cost of the keyBytes stay constant, but the cost of dataBytes can change. Therefore both the REFUND value and the RESET (non-zero to non-zero) cost must be modified.</p>

<p>Any change attempt that does not modify the value has a cost of 200 (similar to SLOAD).  For instance zero to zero, or A to A. Will call this new cost the UNCHANGE cost.</p>

<p>The REFUND value is computed as SET cost minus 5000. (Maximum 14720, minimum 460).</p>

<p>The CLEAR cost (from non-zero to zero) is still computed as 5000.</p>

<p>The RESET cost now only accounts for value changes from a non-zero value to a different non-zero value. This has a base cost of 5000 plus the difference between new cell costs and old cell cost (maximum 12130, minimum 5000).</p>

<h1 id="copyright"><strong>Copyright</strong></h1>

<p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div>
