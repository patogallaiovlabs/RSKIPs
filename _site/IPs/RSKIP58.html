<h1 id="handling-bitcoin-forks">Handling Bitcoin Forks</h1>

<table>
  <thead>
    <tr>
      <th style="text-align: left">RSKIP</th>
      <th style="text-align: left">58</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Title</strong></td>
      <td style="text-align: left">Handling Bitcoin Forks</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Created</strong></td>
      <td style="text-align: left">14-NOV-2017</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Author</strong></td>
      <td style="text-align: left">SDL</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Purpose</strong></td>
      <td style="text-align: left">Sca</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Layer</strong></td>
      <td style="text-align: left">Core</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Complexity</strong></td>
      <td style="text-align: left">3</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Status</strong></td>
      <td style="text-align: left">Draft</td>
    </tr>
  </tbody>
</table>

<h1 id="abstract"><strong>Abstract</strong></h1>

<p>This RSKIP discusses how a future Bitcoin fork affects the RSK platform and discusses different plans to move forward in case of a future Bitcoin fork. Finally, it suggests the inclusion of a special method to recover funds in smart-contract in case of a unsupported fork.</p>

<h1 id="specification"><strong>Specification</strong></h1>

<p>Parallel Bitcoin forks, such as Bitcoin Cash or Bitcoin Gold, are gaining popularity. The idea that a parallel Bitcoin fork would have any value is relatively new. A couple of years ago creating a parallel Bitcoin fork was considered a plain scam and wouldn’t receive much attention. Some core developers thought about hard-forking Bitcoin to achieve a supposedly better Bitcoin, but not about having two competing “Bitcoins”. This changed in 2017, as a part of the Bitcoin community created the Bitcoin Cash split, whose value not only resisted large sells but kept growing over he following months. Therefore the ideal single Bitcoin scenario cannot be assumed anymore. RSK is currently a Bitcoin federated side-chain, with a hybrid SPV-based transfer BTC-&gt;SBTC transfer system. There are two problems: the first is that the SPV peg follows the longer chain, as long as the headers are well-formed according to the Bitcoin protocol, no matter what chain the RSK community wants it to follow. The second problem is that, in case of a persistent valuable parallel fork, the RSK bitcoins held in custody by the Federation cannot be easily returned to their lawful owners. This is because some SBTC may be held in smart contracts that have no explicit owner. To mitigate the first problem, we at RSK will inform the community of any upcoming fork. If we see a huge demand to push the RSK platform to follow a specific fork, contrary to what the majority of hashing power is going, we’ll try to coordinate with the community one of the following options:
    1. Create a new RSK blockchain as a side-chain to one of the forks, and keep both.
    2. Create a new bridge between the the RSK blockchain and the un-bridged fork, add a new native cryptocurrency and duplicate the account state space into two parallel account spaces, each using its own cryptocurrency. 
    3. Follow one fork and allow users to withdrawal the cryptocurrency corresponding to the other fork.</p>

<p>The second option, while the most interesting from the point of view of RSK, is the most technically challenging. For the third option, we suggest that all smart contracts created in RSK have the following public method (as specified in Solidiy language):</p>

<p>function public getOwnerAddressInFork() returns (bytes20 address);</p>

<p>Here the address must be a standard 20-byte P2SH address in binary.</p>

<p>This of course gives the creator of smart-contract a certain advantage over all the remaining users, because he may be able to get the cloned balance on a fork.</p>

<h1 id="copyright"><strong>Copyright</strong></h1>

<p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.</p>
