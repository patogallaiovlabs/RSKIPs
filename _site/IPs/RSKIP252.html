<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Transaction Gas Price Cap | RSK Improvement Proposals</title>
    <meta
      property="og:title"
      content="Transaction Gas Price Cap | RSK Improvement Proposals"
    />
    <meta name="description" content="RSK Improvement Proposals (RSKIPs) describe standards for the RSK platform, including core protocol specifications, client APIs, and contract standards." />
    <meta property="og:description" content="RSK Improvement Proposals (RSKIPs) describe standards for the RSK platform, including core protocol specifications, client APIs, and contract standards." />
    <meta name="twitter:description" content="RSK Improvement Proposals (RSKIPs) describe standards for the RSK platform, including core protocol specifications, client APIs, and contract standards." />

  <meta name="generator" content="Jekyll" />
  <meta property="og:locale" content="en_US" />
  <link rel="canonical" href="https://ips.rsk.co/IPs/RSKIP252" />
  <meta property="og:url" content="https://ips.rsk.co/IPs/RSKIP252" />
  <meta property="og:site_name" content="RSK Improvement Proposals" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <script type="application/ld+json">
    {
      "@type": "WebSite",
      "url": "https://ips.rsk.co",
      "name": "RSK Improvement Proposals",
      "description": "RSK Improvement Proposals (RSKIPs) describe standards for the RSK platform, including core protocol specifications, client APIs, and contract standards.",
      "@context": "https://schema.org"
    }
  </script>
  <link rel="stylesheet" href="/assets/css/style.css" />
      <!-- Google Fonts -->
      <link href="https://fonts.googleapis.com/css?family=Quicksand:400,700,900&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,600,700,800&display=swap" rel="stylesheet"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="RSK Improvement Proposals" /><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha256-nlrDrBTHxJJlDDX22AS33xYI1OJHnGMDhiYMSe2U0e0=" crossorigin="anonymous"></script>
</head>
<body><header class="site-header" role="banner">
  <button id="dark-mode-toggle" class="dark-mode-toggle theme-toggle-button">
    <svg class="icon" style="width:24px;height:24px" viewBox="0 0 24 24">
      <path fill="currentColor" d="M7.5,2C5.71,3.15 4.5,5.18 4.5,7.5C4.5,9.82 5.71,11.85 7.53,13C4.46,13 2,10.54 2,7.5A5.5,5.5 0 0,1 7.5,2M19.07,3.5L20.5,4.93L4.93,20.5L3.5,19.07L19.07,3.5M12.89,5.93L11.41,5L9.97,6L10.39,4.3L9,3.24L10.75,3.12L11.33,1.47L12,3.1L13.73,3.13L12.38,4.26L12.89,5.93M9.59,9.54L8.43,8.81L7.31,9.59L7.65,8.27L6.56,7.44L7.92,7.35L8.37,6.06L8.88,7.33L10.24,7.36L9.19,8.23L9.59,9.54M19,13.5A5.5,5.5 0 0,1 13.5,19C12.28,19 11.15,18.6 10.24,17.93L17.93,10.24C18.6,11.15 19,12.28 19,13.5M14.6,20.08L17.37,18.93L17.13,22.28L14.6,20.08M18.93,17.38L20.08,14.61L22.28,17.15L18.93,17.38M20.08,12.42L18.94,9.64L22.28,9.88L20.08,12.42M9.63,18.93L12.4,20.08L9.87,22.27L9.63,18.93Z" />
    </svg>
  </button>


<div class="wrapper"><a class="site-title" rel="author" href="http://localhost:4000/">RSK Improvement Proposals</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link underline" href="http://localhost:4000/all">All</a><a class="page-link underline" href="http://localhost:4000/scalability">Scalability</a><a class="page-link underline" href="http://localhost:4000/security">Security</a><a class="page-link underline" href="http://localhost:4000/usability">Usability</a><a class="page-link underline" href="http://localhost:4000/fairness">Fairness</a><a class="page-link underline" href="http://localhost:4000/standardtrack">Standard Track</a></div>





      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Transaction Gas Price Cap</h1>
  </header>

  <div class="post-content">
    <h1 id="transaction-gas-price-cap">Transaction Gas Price Cap</h1>

<table>
  <thead>
    <tr>
      <th style="text-align: left">RSKIP</th>
      <th style="text-align: left">252</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Title</strong></td>
      <td style="text-align: left">Transaction Gas Price Cap</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Created</strong></td>
      <td style="text-align: left">29-JUN-2021</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Author</strong></td>
      <td style="text-align: left">SDL</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Purpose</strong></td>
      <td style="text-align: left">Sec, Fair</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Layer</strong></td>
      <td style="text-align: left">Core</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Complexity</strong></td>
      <td style="text-align: left">1</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Status</strong></td>
      <td style="text-align: left">Draft</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>discussions-to</strong></td>
      <td style="text-align: left"> </td>
    </tr>
  </tbody>
</table>

<h1 id="abstract"><strong>Abstract</strong></h1>

<p>This RSKIP proposes the limit of the transaction gas price as a multiple of the minimum gas price established in the block header. The objective is twofold: remove incentives for <a href="https://bitcoinops.org/en/topics/fee-sniping/">fee sniping</a> and <a href="https://medium.com/r/?url=https%3A%2F%2Fwww.cs.umd.edu%2F~jkatz%2Fpapers%2Fwhale-txs.pdf">fee-whale transactions</a>, and to prevent users from accidentally draining their wallets with unintended high transaction fees.</p>

<h1 id="motivation"><strong>Motivation</strong></h1>

<p>RSK is economically protected from several known attacks involving high transaction fees, including fee sniping, fee-whale transactions and mining atomization attacks. For these attacks to be profitable in RSK, the bribe in fees must be at least 100 times higher than the average block transaction fees. While this security margin is wide, currently RSK blocks are not congested and average fees in RSK are low. Therefore the attack is practical.  We propose to invalidate any block containing a transaction whose gas price is 100 times higher than the minimum gas price of the block.</p>

<h1 id="specification"><strong>Specification</strong></h1>

<p>A valid block cannot contain any transaction whose gas price is higher that 100 times the minimum gas price specified in the block.</p>

<p>Any network node that is synchronized must block the propagation of any transaction whose gas price is higher than 80 times the minimum gas price of the latest block. Network nodes that are not synchronized do not currently broadcast transactions.</p>

<h1 id="rationale">Rationale</h1>

<p>If during network congestion, RSK transactions reach the highest gas price allowed, this would prevent the gas auctioning and the price discovery mechanisms to work as expected. However, considering the proposed 100x allowed spread, the chances that this happen are negligible. During sudden times of high network congestion in Ethereum (i.e. in June 27 14:00), transaction fees spiked <a href="https://ethereumprice.org/gas/">10x</a> in 30 minutes. These events won’t cause complications related to this proposal. Miners can adjust the minimum gas price at the new maximum rate of +1%/block, so they can double the upper limit every 70 blocks (approximately 35 minutes), restoring the well functioning market exponentially fast. This is also in their best economic interest.</p>

<h2 id="historical-data">Historical Data</h2>

<p><a href="https://bitinfocharts.com/comparison/ethereum-transactionfees.html#3m">Historical data</a> on Ethereum shows that fees can double in a day. Standard fee spreads at various Ethereum websites show real world data regarding price spread. At the time of writing, a first Ethereum website <a href="https://etherscan.io/gastracker">reports</a> a spread of 2X between the highest and lowest fees paid by transactions. A second website shows a similar <a href="https://ethgasstation.info/calculatorTxV.php">spread</a>. This website also shows a high number of transactions in the mempool offering <a href="https://ethgasstation.info/">tiny fees</a>, categorized as “standard”. These tiny-fee transactions are probably not included in blocks for weeks, and we won’t consider them in this analysis because they would have gas price below the RSK minimum allowed. We conclude that a allowing a 100 spread in RSK fees is more than enough to keep the fee market working at all times and reduce the impact of attacks.</p>

<h2 id="high-fee-transaction-propagation-limit-rule">High-fee Transaction Propagation Limit Rule</h2>

<p>The rule that limits transaction propagation of high-fee transactions prevents that 51% of the miners decrease the minimum gas price and cancel a large number of transactions in the mempool. This could be performed as an attack or accidentally. In both cases large cancellations means network resources were wasted in the propagation of the cancelled transactions. With the introduced transaction propagation limit, high-fee transaction will still be able to be included in blocks with high probability, even when the minimum gas price is being decreased continuously. This limit is not a consensus rule and can be modified easily in a reference node software release.</p>

<h1 id="backwards-compatibility">Backwards Compatibility</h1>

<p>This change is a hard-fork and therefore all full nodes must be updated. SPV light-clients do not need to be updated.</p>

<h1 id="test-cases">Test Cases</h1>

<p>TBD</p>

<h2 id="security-considerations">Security Considerations</h2>

<p>This proposal reduces the risk of pre-existing security vulnerabilities. This proposal does not introduce a new fast and reliable mechanism to cancel mempool transactions, therefore it cannot be used to perform DoS attacks against the node mempools.</p>

<h1 id="copyright"><strong>Copyright</strong></h1>

<p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.</p>

  </div>

</article>

      </div>
    </main><footer>
    <div class="footer_cont">
        <div class="footer_box">
            <ul class="social-media-list"><li><a href="https://github.com/rsksmart/RSKIPs" target="_blank" rel="noopener"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">Visit on Github</span></a></li></ul>
        </div>
    </div>
</footer><script src="../assets/js/dark_mode.js"></script>
    <script src="../../assets/js/dark_mode.js"></script>
  </body>

</html>
